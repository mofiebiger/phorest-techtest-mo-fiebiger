<!DOCTYPE html>
<html>

<head>
  <title>Phorest - Client Search Engine</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
  <link rel = "stylesheet" type = "text/css" href = "./style.css" />
</head>

<body>

<div class="jumbotron text-center warning text-dark">
  <h1><img src="./phorest.png" alt="phorest"></h1>
  <p size="26px;">Official Client Search Engine</p>
</div>


<div class="container">
  <h2>Filterable Table</h2>
  <p>Type something in the input field to search the table for first names, last names or emails:</p>
  <input class="form-control" id="myInput" type="text" placeholder="Search..">
  <br>
  <table class="table table-bordered table-striped" id="clientTable">
    <thead>
      <tr>
        <th>Firstname</th>
        <th>Lastname</th>
        <th>Email</th>
        <th>Phone</th>
        <th></th>
      </tr>
    </thead>
    <tbody id="myTable">
      <tr>
        <td>John</td>
        <td>Doe</td>
        <td>john@example.com</td>
        <td>555-555-555</td>
        <!-- Trigger the modal with a button -->
        <td><button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal">Select</button></td>
      </tr>
      <tr>
        <td>Mary</td>
        <td>Moe</td>
        <td>mary@mail.com</td>
      </tr>
      <tr>
        <td>July</td>
        <td>Dooley</td>
        <td>july@greatstuff.com</td>
      </tr>
      <tr>
        <td>Anja</td>
        <td>Ravendale</td>
        <td>a_r@test.com</td>
      </tr>
    </tbody>
  </table>

  <p>Note that we start the search in tbody, to prevent filtering the table headers.</p>
</div>

<script>
$(document).ready(function(){
  $("#myInput").on("keyup", function() {
    var value = $(this).val().toLowerCase();
    $("#myTable tr").filter(function() {
      $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
    });
  });
});



  $.ajax({
            'async': 'true',
            'url': "https://api-gateway-dev.phorest.com/third-party-api-server/api/business/x/client?firstName=Patrick&page=0&size=20",
            'type': 'get',
            'headers':  {
                  "Authorization": "Basic " + "Z2xvYmFsL2Nsb3VkQGFwaWV4YW1wbGVzLmNvbTpWTWxSby9laCtYZDhNfmw="
            },
            'dataType': 'json',
        }).done(function (result) {
          object = result._embedded;
          //console.log(object);
          for(var i = 0; i < object.lenth; i++){
            object2 = object[i].firstName;

            console.log(object2);

          }


          var clientTable = '<table>';
              clientTable += '<table class="table table-bordered table-striped">';
              clientTable += '<thead>'
              clientTable += '<tr>'
              clientTable += '<th>First Name</th>'
              clientTable += '<th>Last Name</th>'
              clientTable += '<th>Email</th>'
              clientTable += '<th>Phone</th>'
              clientTable += '<th></th>'
              clientTable += '</tr>'
              clientTable += '</thead>'
            document.getElementById("clientTable").innerHTML = clientTable;

})
</script>




<!-- Modal -->
<div id="myModal" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Modal Header</h4>
      </div>
      <div class="modal-body">
        <p>Some text in the modal.</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>

  </div>
</div>


</body>
</html>
